<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>ont-app.rdf.core documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name"></span> <span class="project-version"></span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ont-app</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>rdf</span></div></div></li><li class="depth-3 branch current"><a href="ont-app.rdf.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="ont-app.rdf.ont.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ont</span></div></a></li><li class="depth-3"><a href="ont-app.rdf.test-support.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test-support</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="ont-app.rdf.core.html#var-add-catalog-entry.21"><div class="inner"><span>add-catalog-entry!</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-ask-s-p-o"><div class="inner"><span>ask-s-p-o</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-ask-s-p-o-template"><div class="inner"><span>ask-s-p-o-template</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-bnode-kwi.3F"><div class="inner"><span>bnode-kwi?</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cache-url-as-local-file"><div class="inner"><span>cache-url-as-local-file</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cached-file-path"><div class="inner"><span>cached-file-path</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-catalog-lookup"><div class="inner"><span>catalog-lookup</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-check-ns-metadata"><div class="inner"><span>check-ns-metadata</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-check-qname"><div class="inner"><span>check-qname</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-create-temp-file"><div class="inner"><span>cljc-create-temp-file</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-file-exists.3F"><div class="inner"><span>cljc-file-exists?</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-file-length"><div class="inner"><span>cljc-file-length</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-http-get"><div class="inner"><span>cljc-http-get</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-is-local-file.3F"><div class="inner"><span>cljc-is-local-file?</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-make-file"><div class="inner"><span>cljc-make-file</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-make-parents"><div class="inner"><span>cljc-make-parents</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-cljc-resource"><div class="inner"><span>cljc-resource</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-coerce-graph-element"><div class="inner"><span>coerce-graph-element</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-collect-ns-catalog-metadata"><div class="inner"><span>collect-ns-catalog-metadata</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-default-context"><div class="inner"><span>default-context</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-from-clause-for"><div class="inner"><span>from-clause-for</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-get-cached-file-path-spec"><div class="inner"><span>get-cached-file-path-spec</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-http-get-from-catalog"><div class="inner"><span>http-get-from-catalog</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-load-rdf"><div class="inner"><span>load-rdf</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-load-rdf-dispatch"><div class="inner"><span>load-rdf-dispatch</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-lookup-file-specs-in-catalog"><div class="inner"><span>lookup-file-specs-in-catalog</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-normal-form-query-template"><div class="inner"><span>normal-form-query-template</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-ontology"><div class="inner"><span>ontology</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-parse-url"><div class="inner"><span>parse-url</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-parse-url-re"><div class="inner"><span>parse-url-re</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-prefixed"><div class="inner"><span>prefixed</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-query-for-normal-form"><div class="inner"><span>query-for-normal-form</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-query-for-o"><div class="inner"><span>query-for-o</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-query-for-o-template"><div class="inner"><span>query-for-o-template</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-query-for-p-o"><div class="inner"><span>query-for-p-o</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-query-for-p-o-template"><div class="inner"><span>query-for-p-o-template</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-query-for-subjects"><div class="inner"><span>query-for-subjects</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-query-template-defaults"><div class="inner"><span>query-template-defaults</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-quote-str"><div class="inner"><span>quote-str</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-read-rdf"><div class="inner"><span>read-rdf</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-read-rdf-dispatch"><div class="inner"><span>read-rdf-dispatch</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-read-transit-json"><div class="inner"><span>read-transit-json</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-render-literal"><div class="inner"><span>render-literal</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-render-literal-as-transit-json"><div class="inner"><span>render-literal-as-transit-json</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-render-literal-dispatch"><div class="inner"><span>render-literal-dispatch</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-render-transit-json"><div class="inner"><span>render-transit-json</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-resource-catalog"><div class="inner"><span>resource-catalog</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-special-literal-dispatch"><div class="inner"><span>special-literal-dispatch</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-standard-data-transfer-dispatch"><div class="inner"><span>standard-data-transfer-dispatch</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-subjects-query-template"><div class="inner"><span>subjects-query-template</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-transit-re"><div class="inner"><span>transit-re</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-transit-read-handlers"><div class="inner"><span>transit-read-handlers</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-transit-write-handlers"><div class="inner"><span>transit-write-handlers</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-write-rdf"><div class="inner"><span>write-rdf</span></div></a></li><li class="depth-1"><a href="ont-app.rdf.core.html#var-write-rdf-dispatch"><div class="inner"><span>write-rdf-dispatch</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">ont-app.rdf.core</h1><div class="doc"><pre class="plaintext">This is a backstop for shared logic between various RDF-based
  implementations of IGraph. 
It includes:
- support for LangStr using the #voc/lstr custom reader
- support for ^^transit:json datatype tags
- templating utilities for the standard IGraph member access methods.
- i/o methods `load-rdf` `read-rdf` and `write-rdf`.
 </pre></div><div class="public anchor" id="var-add-catalog-entry.21"><h3>add-catalog-entry!</h3><div class="usage"><code>(add-catalog-entry! download-url namespace-uri prefix media-type)</code></div><div class="doc"><pre class="plaintext">Adds an entry in @resource-catalog for `download-url` `namespace-uri` `prefix` `media-type`
- Where
  - `download-url` is a URL (or string) naming a place on the web containing an RDF file
  - `namespace-uri` is the primary URI, associated with `prefix`
  - `prefix` is the preferred prefix for `namespace-uri`
  - `media-type` is the MIME type, of `download-url` eg 'text/turtle'
</pre></div></div><div class="public anchor" id="var-ask-s-p-o"><h3>ask-s-p-o</h3><div class="usage"><code>(ask-s-p-o ask-fn rdf-store s p o)</code><code>(ask-s-p-o graph-uri ask-fn rdf-store s p o)</code></div><div class="doc"><pre class="plaintext">Returns true if `s` `p` `o` is a triple at endpoint of `rdf-store`
Where:
  - `s` `p` `o` are subject, predicate and object
  - `rdf-store` is an RDF store
  - `graph-uri` is a URI or KWI naming the graph, or a set of them
     (or nil if DEFAULT graph)
  - `ask-fn` := fn [repo] -&gt; bindings</pre></div></div><div class="public anchor" id="var-ask-s-p-o-template"><h3>ask-s-p-o-template</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A 'stache template for a query ref'd in `ask-s-p-o`, informed by `query-template-map`
</pre></div></div><div class="public anchor" id="var-bnode-kwi.3F"><h3>bnode-kwi?</h3><div class="usage"><code>(bnode-kwi? kwi)</code></div><div class="doc"><pre class="plaintext">True when `kwi` matches the canonical bnode representation.
</pre></div></div><div class="public anchor" id="var-cache-url-as-local-file"><h3>cache-url-as-local-file</h3><div class="usage"><code>(cache-url-as-local-file context url)</code></div><div class="doc"><pre class="plaintext">RETURNS `cached-file`, with contents of `url` loaded
SIDE-EFFECT: creates file named `cached-file` if it does not already exist.
- Where
  - `context` is a native-normal graph informed by vocabulary below.
  - `url` := a URL or string naming URL
  - `cached-file-path` names a local file to contain contents from `url`
- VOCABULARY (for `context`)
  - [:rdf-app/UrlCache :rdf-app/pathFn `cached-file-path-fn`]
    - optional. Default will try to derive `parse-map` from `url` first by looking
      it up in the @`resource-catalog` and then by parsing the `url` itself
  - [:rdf-app/UrlCache :rdf-app/directory `cache-directory`]
  - `cached-file-path-fn` := fn (uri) -&gt; `parse-map`
  - `parse-map` := m s.t (keys m) :~ #{:url :path :stem :ext} for `url` informed by `context`
</pre></div></div><div class="public anchor" id="var-cached-file-path"><h3>cached-file-path</h3><div class="usage"><code>(cached-file-path &amp; {:keys [dir url stem ext]})</code></div><div class="doc"><pre class="plaintext">Returns a canonical path for cached contents read from a URL.
</pre></div></div><div class="public anchor" id="var-catalog-lookup"><h3>catalog-lookup</h3><div class="usage"><code>(catalog-lookup url)</code></div><div class="doc"><pre class="plaintext">Returns `catalog-entry` for `url`
- Where
  - `catalog-entry` := m s.t. (keys m) :~ #{?media-type :?prefix :?suffix :?media-url}
  - `url` is a URL that may be in the resource catalog
  - `:?prefix` is the preferred prefix associated with `url` (which informs the stem)
  - `:?suffix` is the suffix associated with the `:?media-url` (informs the extension)
</pre></div></div><div class="public anchor" id="var-check-ns-metadata"><h3>check-ns-metadata</h3><div class="usage"><code>(check-ns-metadata kwi)</code></div><div class="doc"><pre class="plaintext">Logs a warning when `kwi` is in a namespace with no metadata.
</pre></div></div><div class="public anchor" id="var-check-qname"><h3>check-qname</h3><div class="usage"><code>(check-qname uri-spec)</code></div><div class="doc"><pre class="plaintext">Traps the keyword assertion error in voc and throws a more meaningful error 
about blank nodes not being supported as first-class identifiers.</pre></div></div><div class="public anchor" id="var-cljc-create-temp-file"><h3>cljc-create-temp-file</h3><div class="usage"><code>(cljc-create-temp-file stem ext)</code></div><div class="doc"><pre class="plaintext">Returns a temporary file named per `stem` and `ext`. Not supported under cljs.
- where
  - `stem` is a general name for the file
  - `ext` is a file extension typically starting with '.'
</pre></div></div><div class="public anchor" id="var-cljc-file-exists.3F"><h3>cljc-file-exists?</h3><div class="usage"><code>(cljc-file-exists? path)</code></div><div class="doc"><pre class="plaintext">True when `path` exists in the local file system
</pre></div></div><div class="public anchor" id="var-cljc-file-length"><h3>cljc-file-length</h3><div class="usage"><code>(cljc-file-length f)</code></div><div class="doc"><pre class="plaintext">Returns length of file `f`. Not supported under cljs.
</pre></div></div><div class="public anchor" id="var-cljc-http-get"><h3>cljc-http-get</h3><div class="usage"><code>(cljc-http-get url req)</code></div><div class="doc"><pre class="plaintext">Makes a GET call to `url` with `req`. Not yet supported in cljs.
- Where
  - `url` is a URL or a URL string
  - `req` is an http request map
</pre></div></div><div class="public anchor" id="var-cljc-is-local-file.3F"><h3>cljc-is-local-file?</h3><div class="usage"><code>(cljc-is-local-file? f)</code></div><div class="doc"><pre class="plaintext">True when `f` is a file in the local file system
</pre></div></div><div class="public anchor" id="var-cljc-make-file"><h3>cljc-make-file</h3><div class="usage"><code>(cljc-make-file path)</code></div><div class="doc"><pre class="plaintext">Returns new file object for `path`. Not supported under cljs.
</pre></div></div><div class="public anchor" id="var-cljc-make-parents"><h3>cljc-make-parents</h3><div class="usage"><code>(cljc-make-parents f)</code></div><div class="doc"><pre class="plaintext">Ensures directory path for file `f`. Not supported under cljs.
</pre></div></div><div class="public anchor" id="var-cljc-resource"><h3>cljc-resource</h3><div class="usage"><code>(cljc-resource r)</code></div><div class="doc"><pre class="plaintext">Returns the resource named by `r`. Not supported under cljs.
</pre></div></div><div class="public anchor" id="var-coerce-graph-element"><h3>coerce-graph-element</h3><div class="usage"><code>(coerce-graph-element x)</code><code>(coerce-graph-element policy x)</code></div><div class="doc"><pre class="plaintext">Returns `x`, possibly coerced to either a kwi or a java.net.URI per `policy`
- where
  - `policy` := m s.t. (keys m) :- #{::kwi-if ::uri-if}
  - `x` is any candidate as an element in an IGraph
  - `kwi-if` := fn [x] -&gt; truthy if `x` should be translated to a keyword id
  - `uri-if` := fn [x] -&gt; truthy if `x` should be translated to a java.net.URI
- NOTE: Some implementations of IGraph may be a lot more tolarant of datatypes
  in s/p/o position than the URI/URI/URI-or-literal that  RDF expects.
</pre></div></div><div class="public anchor" id="var-collect-ns-catalog-metadata"><h3>collect-ns-catalog-metadata</h3><div class="usage"><code>(collect-ns-catalog-metadata gacc _prefix ns)</code></div><div class="doc"><pre class="plaintext">Reducing function outputs `gacc'` given voc metadata assigned to namespace
- NOTE: typically used to initialize the resource catalog.
</pre></div></div><div class="public anchor" id="var-default-context"><h3>default-context</h3><div class="usage"></div><div class="doc"><pre class="plaintext">An atom containing a native-normal graph with default i/o context configurations.
- NOTE: This would typically be the starting point for the i/o context of  individual
  implementations.
- VOCABULARY
  - [:rdf-app/UrlCache :rdf-app/directory `URL cache directory`]
</pre></div></div><div class="public anchor" id="var-from-clause-for"><h3>from-clause-for</h3><div class="usage"><code>(from-clause-for graph-uri)</code></div><div class="doc"><pre class="plaintext">
Returns FROM `graph-uri`'
Note: typically informs `query-template-map` 
</pre></div></div><div class="public anchor" id="var-get-cached-file-path-spec"><h3>get-cached-file-path-spec</h3><div class="usage"><code>(get-cached-file-path-spec context url)</code></div><div class="doc"><pre class="plaintext">Returns `m` s.t (keys m) :~ #{:url :path :stem :ext} for `url` informed by `context`
- Where
  - `url` (as arg) is x s.t. (str x) -&gt; a URL string
  - `context` is an native-normal graph describing the I/O context
  - `url` (as key) is a URL string
  - `path` is the path component of `url`
  - `stem` is the 'stem portion of /path/to/&lt;stem&gt;.&lt;ext&gt;
  - `ext`  is the 'ext' portion of /path/to/&lt;stem&gt;.&lt;ext&gt;
  - `dir`  is the directory containing cache files
- NOTE: this should be sufficient to create a unique temp file path for caching
  contents of `url`.
- VOCABULARY
  - [:rdf-app/UrlCache :rdf-app/pathFn `cached-file-path-fn`]
    - optional. Default will try to infer `m` from `url` automatically
      Either through `lookup-file-specs-in-catalog` or by parsing `url` itself.
  - [:rdf-app/UrlCache :rdf-app/directory `dir`]  
  - `cached-file-path-fn` := fn (uri) -&gt; `m`
</pre></div></div><div class="public anchor" id="var-http-get-from-catalog"><h3>http-get-from-catalog</h3><div class="usage"><code>(http-get-from-catalog url)</code></div><div class="doc"><pre class="plaintext">returns an http response to a GET request for `url`
- Where
  - `url` is a URL with an entry in the @`resource-catalog`
</pre></div></div><div class="public anchor" id="var-load-rdf"><h3>load-rdf</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Returns a new IGraph with contents for `to-load`,
- args: [`context` `to-load`]
- dispatched on: [`graph-dispatch` `to-load-rdf-dispatch`]
- Where
  - `context` is a native-normal graph with descriptions per the vocabulary below.
     It may also provide platform-specific details that inform specific methods.
  - `to-load` is typically a path or URL, but could be anything you write a method for
    - if this is a file name that exists in the local file system this will be
      dispatched as `:rdf-app/LocalFile`. We may need to derive `file-extension`.
  - `graph-dispatch` is the dispatch value identifying the IGraph implementation
  - `to-load-rdf-dispatch` is the dispatch value derived for `to-load-rdf`
  - `file-extension` may be implicit from a file name or derived per vocabulary below
     It may be necesary to inform your RDF store about the expected format.

- VOCABULARY (in `context`)
  - [`#'load-rdf` :rdf-app/hasGraphDispatch `graph-dispatch`]
  - [`#'load-rdf` :rdf-app/toImportDispatchFn (fn [to-load] -&gt; to-load-dispatch)]
    ... optional. Defaults to output of `standard-data-transfer-dispatch`
  - [`#'load-rdf` :rdf-app/extensionFn (fn [to-load] -&gt; file-extension)]
    ... optional. By default it parses the presumed path name described by `to-load`
  - [rdf-app/UrlCache rdf-app/directory `cache-directory`]
  - [rdf-app/UrlCache rdf-app/cacheMaintenance :rdf-app/DeleteOnRead]
    ... optional. specifies that a cached file should be deleted after a read.
    - by default it will not be deleted.
</pre></div></div><div class="public anchor" id="var-load-rdf-dispatch"><h3>load-rdf-dispatch</h3><div class="usage"><code>(load-rdf-dispatch context to-load)</code></div><div class="doc"><pre class="plaintext">Returns [graph-dispatch to-load-dispatch]. See docstring for `rdf/load-rdf`
</pre></div></div><div class="public anchor" id="var-lookup-file-specs-in-catalog"><h3>lookup-file-specs-in-catalog</h3><div class="usage"><code>(lookup-file-specs-in-catalog url)</code></div><div class="doc"><pre class="plaintext">Returns `file-specs` for `url`
- Where
  - `file-specs` := m s.t. (keys m) :~ #{:url :path :stem :ext}
  - `url` (as arg) is a URL we may want to get from an http call
  - `url` (as key) is the string version of `url`
  - `path` is the file path of `url`
  - `stem` is the preferred prefix for `url` in the catalog
  - `ext` is the file suffix associated with the media type of `url` in the catalog
</pre></div></div><div class="public anchor" id="var-normal-form-query-template"><h3>normal-form-query-template</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A 'stache template for a query ref'd in `query-for-normal-form`, informed by `query-template-map` 
</pre></div></div><div class="public anchor" id="var-ontology"><h3>ontology</h3><div class="usage"></div><div class="doc"><pre class="plaintext">The supporting vocabulary for the RDF module
</pre></div></div><div class="public anchor" id="var-parse-url"><h3>parse-url</h3><div class="usage"><code>(parse-url url)</code></div><div class="doc"><pre class="plaintext">Returns a file specification parsed directly from a URL (not in the catalog), or nil
- where
  - `url` is a URL, probably a file resource</pre></div></div><div class="public anchor" id="var-parse-url-re"><h3>parse-url-re</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A regex to parse a file URL string with a file name and an extension.
</pre></div></div><div class="public anchor" id="var-prefixed"><h3>prefixed</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Returns `query`, with prefix declarations prepended
Where
- `query` is presumed to be a SPARQL query</pre></div></div><div class="public anchor" id="var-query-for-normal-form"><h3>query-for-normal-form</h3><div class="usage"><code>(query-for-normal-form query-fn rdf-store)</code><code>(query-for-normal-form graph-uri query-fn rdf-store)</code></div><div class="doc"><pre class="plaintext">Returns IGraph normal form for `graph` named by `graph-uri` in `rdf-store`
Where
- `graph` is a named graph in `rdf-store`
- `graph-uri` is a URI or KWI naming the graph, or a set of them
   (default nil -&gt; DEFAULT graph)
- `rdf-store` is an RDF store 
- `query-fn` := fn [rdf-store sparql-query] -&gt; #{`bmap`, ...}
- `bmap` := {:?s :?p :?o}
- `sparql-query` :- `normal-form-query-template`
</pre></div></div><div class="public anchor" id="var-query-for-o"><h3>query-for-o</h3><div class="usage"><code>(query-for-o query-fn rdf-store s p)</code><code>(query-for-o graph-uri query-fn rdf-store s p)</code></div><div class="doc"><pre class="plaintext">Returns #{`o`...} for `s` and `p` at endpoint of `rdf-store`
Where:
  - `o` is an object rendered per binding translator of `rdf-store`
  - `s` is a subject URI rendered per binding translator of `rdf-store`
  - `p` is a predicate URI rendered per binding translator of `rdf-store`
  - `rdf-store` is an RDF store
  - `query-fn` := fn [repo] -&gt; bindings
  - `graph-uri` is a URI or KWI naming the graph, or a set of them
     (or nil if DEFAULT graph)
  </pre></div></div><div class="public anchor" id="var-query-for-o-template"><h3>query-for-o-template</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A 'stache template for a query ref'd in `query-for-o`, informed by `query-template-map`
</pre></div></div><div class="public anchor" id="var-query-for-p-o"><h3>query-for-p-o</h3><div class="usage"><code>(query-for-p-o query-fn rdf-store s)</code><code>(query-for-p-o graph-uri query-fn rdf-store s)</code></div><div class="doc"><pre class="plaintext">Returns {`p` #{`o`...}...} for `s` from query to `rdf-store`
Where
- `p` is a predicate URI rendered per binding translator of `rdf-store`
- `o` is an object value, rendered per the binding translator of `rdf-store`
- `s` is a subject uri keyword. ~ voc/voc-re
- `rdf-store` is and RDF store.
- `query-fn` := fn [repo] -&gt; bindings
- `graph-uri` is a URI or KWI naming the graph, or a set of them
  (or nil if DEFAULT graph)
</pre></div></div><div class="public anchor" id="var-query-for-p-o-template"><h3>query-for-p-o-template</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A 'stache template for a query ref'd in `query-for-p-o`, informed by `query-template-map`
</pre></div></div><div class="public anchor" id="var-query-for-subjects"><h3>query-for-subjects</h3><div class="usage"><code>(query-for-subjects query-fn rdf-store)</code><code>(query-for-subjects graph-uri query-fn rdf-store)</code></div><div class="doc"><pre class="plaintext">Returns [`subject` ...] at endpoint of `rdf-store` for `graph-uri`
Where
  - `subject` is the uri of a subject from `rdf-store`, 
  rendered per the binding translator of `rdf-store`
  - `rdf-store` conforms to ::sparql-client spec
  - `query-fn` := fn [repo] -&gt; bindings
  - `graph-uri` is a URI  or KWI naming the graph, or a set of them  (or nil if DEFAULT
    graph)</pre></div></div><div class="public anchor" id="var-query-template-defaults"><h3>query-template-defaults</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Default key/value pairs appicable to query templates for your platform.
Where
- `:from-clauses` one FROM clause for each graph informing the query
- `:rebind-_s` asserts new binding for ?_s in ?_s ?_p ?_o 
- `:rebind-_p` asserts a new binding the value retrieved for ?_p in ?_s ?_p ?_o 
- `:rebind-_o` aserts a new binding the value retrieved for ?_o in ?_s ?_p ?_o
- NOTE: For example we may assert :rebind-_s as `IRI(?_S)` in jena to set up bnode round-tripping for ?_s.
</pre></div></div><div class="public anchor" id="var-quote-str"><h3>quote-str</h3><div class="usage"><code>(quote-str s)</code></div><div class="doc"><pre class="plaintext">Returns `s`, in escaped quotation marks.
Where
  - `s` is a string, typically to be rendered in a query or RDF source.</pre></div></div><div class="public anchor" id="var-read-rdf"><h3>read-rdf</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Side-effect: updates `g` with added contents from `to-read`,
Returns: modified `g`
- args: [context g to-read]
- dispatched on: [graph-dispatch to-read-dispatch]
- Where
  - `context` is a native-normal graph with descriptions per the vocabulary below.
     It may also provide platform-specific details that inform specific methods.
  - `to-read` is typically a path or URL, but could be anything you write a method for
    - if this is a file name that exists in the local file system this will be
      dispatched as `:rdf-app/LocalFile`. We may need to derive `file-extension`.
  - `graph-dispatch` is the dispatch value identifying the IGraph implementation
  - `to-read-dispatch` is the dispatch value derived for `to-read`

  - `file-extension` may be implicit from a file name or derived per vocabulary below
     It may be necesary to inform your RDF store about the expected format.

- VOCABULARY (in `context`)
- [`#'read-rdf` :rdf-app/hasGraphDispatch `graph-dispatch`]
- [`#'read-rdf` :rdf-app/toImportDispatchFn (fn [to-read] -&gt; `to-read-dispatch`)]
  ... optional. Defaults to output of `standard-data-transfer-dispatch`
- [`#'read-rdf` :rdf-app/extensionFn (fn [to-read] -&gt; file-extension)]
  ... optional. By default it parses the presumed path name described by `to-read`
</pre></div></div><div class="public anchor" id="var-read-rdf-dispatch"><h3>read-rdf-dispatch</h3><div class="usage"><code>(read-rdf-dispatch context g to-read)</code></div><div class="doc"><pre class="plaintext">Returns [graph-dispatch to-read-dispatch]. See docstring for `rdf/read-rdf`
</pre></div></div><div class="public anchor" id="var-read-transit-json"><h3>read-transit-json</h3><div class="usage"><code>(read-transit-json s)</code></div><div class="doc"><pre class="plaintext">Returns a value parsed from transit string `s`
Where
- `s` is a &amp;quot;-escaped string encoded as transit
Note: custom datatypes will be informed by @transit-read-handlers
</pre></div></div><div class="public anchor" id="var-render-literal"><h3>render-literal</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Returns an RDF (Turtle) rendering of `literal`
for methods with signature (fn [literal] -&gt; `rdf`)</pre></div></div><div class="public anchor" id="var-render-literal-as-transit-json"><h3>render-literal-as-transit-json</h3><div class="usage"><code>(render-literal-as-transit-json x)</code></div><div class="doc"><pre class="plaintext">Returns 'x^^transit:json'
NOTE: this will be encoded on write and decoded on read by the
  cognitect/transit library.</pre></div></div><div class="public anchor" id="var-render-literal-dispatch"><h3>render-literal-dispatch</h3><div class="usage"><code>(render-literal-dispatch literal)</code></div><div class="doc"><pre class="plaintext">Returns a key for the render-literal method to dispatch on given `literal`
Where
- `literal` is any non-keyword
- NOTE: LangStr and non-nil `special-dispatch` are special cases; otherwise
  (type `literal`)
</pre></div></div><div class="public anchor" id="var-render-transit-json"><h3>render-transit-json</h3><div class="usage"><code>(render-transit-json value)</code></div><div class="doc"><pre class="plaintext">Returns a string of transit for `value`
Where
- `value` is any value that be handled by cognitict/transit
- Note: custom datatypes will be informed by @transit-write-handlers
</pre></div></div><div class="public anchor" id="var-resource-catalog"><h3>resource-catalog</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A native normal graph using this vocabulary:
- [`namespace-uri` :dcat/downloadURL `download-url`]
- [`namespace-uri` :vann/preferredNamespacePrefix `prefix`]
- [`download-url` :dcat/mediaType `media-type`]
- where
  - `download-url` is a URL string
  - `media-type` := :rdf/type :dct/MediaTypeOrExtent
</pre></div></div><div class="public anchor" id="var-special-literal-dispatch"><h3>special-literal-dispatch</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A function [x] -&gt; `dispatch-value`
Where
- `x` is any value, probabaly an RDF literal
- `dispatch-value` is a value to be matched to a `render-literal-dispatch` method.
Default is to return nil, signalling no special dispatch.</pre></div></div><div class="public anchor" id="var-standard-data-transfer-dispatch"><h3>standard-data-transfer-dispatch</h3><div class="usage"><code>(standard-data-transfer-dispatch to-transfer)</code></div><div class="doc"><pre class="plaintext">Returns a standard `dispatch-key` for `to-transfer`, defaulting to (type to-transfer)
- Where
  - `to-transfer` is typically an argument to the `load-rdf`, `read-rdf` or `write-rdf`       methods.
  - `dispatch-key` :~ #{:rdf-app/LocalFile, :rdf-app/FileResource :rdf/WebResource}
    or the type of `to-transfer`.
  - :rdf-app/LocalFile indicates that `to-transfer` is a local path string
  - :rdf-app/FileResource indicates that `to-transfer` is a file resource (maybe from a jar)
  - :rdf-app/WebResource indicates something accessible through a curl call.
</pre></div></div><div class="public anchor" id="var-subjects-query-template"><h3>subjects-query-template</h3><div class="usage"></div><div class="doc"><pre class="plaintext">A 'stache template for a query ref'd in `query-for-subjects`, informed by `query-template-map` 
</pre></div></div><div class="public anchor" id="var-transit-re"><h3>transit-re</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Matches data tagged as transit:json
</pre></div></div><div class="public anchor" id="var-transit-read-handlers"><h3>transit-read-handlers</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Atom of the form {`className` `read-handler, ...}`
Where
- `className` is a fully qualified string naming a class to be encoded
- `read-handler` := fn [from-rep] -&gt; `instance`
- `from-rep` := an Object s.t. (`field` from-rep), encoded in corresponding
  write-handler in @`transit-write-handlers`.
</pre></div></div><div class="public anchor" id="var-transit-write-handlers"><h3>transit-write-handlers</h3><div class="usage"></div><div class="doc"><pre class="plaintext">Atom of the form {`Class` `write-handler`, ...}
Where
- `Class`, a symbol, is a direct reference to the class instance to be encoded
- `write-handler` := fn [s] -&gt; {`field` `value`, ...}
</pre></div></div><div class="public anchor" id="var-write-rdf"><h3>write-rdf</h3><h4 class="type">multimethod</h4><div class="usage"></div><div class="doc"><pre class="plaintext">Side-effect: writes contents of  `g` to  `to-write` in `fmt`,
Returns: modified `g`
- args: [context g to-write fmt]
- dispatched on: [graph-dispatch to-write-dispatch fmt]
- Where
  - `context` is a native-normal graph with descriptions per the vocabulary below.
     It may also provide platform-specific details that inform specific methods.
  - `to-write` is typically a path or URL, but could be anything you write a method for
    - if this is a file name that exists in the local file system this will be
      dispatched as `:rdf-app/LocalFile`.
  - `graph-dispatch` is the dispatch value identifying the IGraph implementation
  - `to-write-dispatch` is the dispatch value derived for `to-write`
  - `fmt` is typically a KWI derived from `:dct/MediaTypeOrExtent`

- VOCABULARY (in `context`)
- [`#'write-rdf` :rdf-app/hasGraphDispatch `graph-dispatch`]
- [`#'write-rdf` :rdf-app/toExportDispatchFn (fn [to-write] -&gt; `to-write-dispatch`)]
  ... optional. Defaults to (type to-write)
</pre></div></div><div class="public anchor" id="var-write-rdf-dispatch"><h3>write-rdf-dispatch</h3><div class="usage"><code>(write-rdf-dispatch context g to-write fmt)</code></div><div class="doc"><pre class="plaintext">Returns [graph-dispatch to-write-dispatch fmt]. See docstring for `rdf/write-rdf`
</pre></div></div></div></body></html>